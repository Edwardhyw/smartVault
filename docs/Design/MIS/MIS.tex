\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

%\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Authors}\\
\midrule
2023-01-18 & 1.0 & Edward He, Erping Zhang, Guangwei Tang, Peng Cui, Peihua Jin\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \url{https://github.com/Edwardhyw/smartVault/tree/main/docs/SRS}


\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for
SmartVault, a Mechatronics system that aims to assist users in finding their belongings

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/Edwardhyw/smartVault}.  

\section{Notation}


The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The Whole projet is decomposed into two main part: Hardware Module and Software Module. The Hardware Module is mainly designed for motor control and Hardware-Software Communication. The Software Module is designed for main human interface. It is the main part of the design of the project. These two modules are further divided into seven parts. The first part of the decomposition is Communication Port 2 which is used for sending signals to the software part of the project. The second decomposition of Hardware Module is Motor Control, it is used to control the real-time position of the camera so that the human body is within the center of the screen taken by the camera.\\ 
When it comes to the Software Module, The first part is Login Module, it is designed ask the user log into the running program. It can also be treated as the first barrier of protection of the user's privacy. If the person does not enter the correct username and password, he or she cannot enter the search window, which means the private information is blocked from the user. The second part is the Information Storage Module. It is used to store the screenshot of the images taken by the camera, which shown the position information of the object. The third part is Image Processing Module. It helps analyze the image to get the key information that is useful to the user. Currently this module contains human body detection method and object movement method. The forth part is  Information Extraction Module. It is related to the Information Storage Module and is used to choose pictures from the database which meets the information required by the user. The fifth part decomposed from the Software Module is Communication Port 1. It can be treated as the connection bbridge between the hardware software. 

\begin{table}[H]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

\multirow{5}{0.3\textwidth}{Software-Module} & 
Login  \\
& Information Storage \\
& Image Processing \\
& Information Extraction \\
& Communication Port 1 \\
\midrule

\multirow{2}{0.3\textwidth}{Hardware-module} & Communication Port 2\\
& Motor Control\\


\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage

\section{MIS of Login Module} 



\subsection{Uses}
N/A

\subsection{Syntax}

\subsubsection{Constants}
\begin{center}
\begin{tabular}{|p{8cm}|p{6cm}|}
\hline
\textbf{Name of Constants} & \textbf{Value}\\
\hline
Username & Determined by the user.\\
\hline
Password & Determined by the user.\\
\hline
Technical Support Window Geometry & 450*300\\
\hline
Login Window Geometry & 450*300\\
\hline
\end{tabular}
\end{center}

\subsubsection{Access Programs}

\begin{center}
\begin{tabular}{|l|l|l| p{10cm} |}
\hline
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Description}  \\
\hline
submitact & N/A & N/A & This is used to get the input of username and password. By verifying the correctness it decides if the user can enter the search window.\\
\hline
tec\_create & N/A & N/A & This is used to create the Technical Support Window.\\
\hline
login\_create & N/A & N/A & This is used to create the main Login Window.\\
\hline

\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

N/A

\subsubsection{Environment Variables}

\begin{center}
\begin{tabular}{|p{8cm}|p{6cm}|}
\hline
\textbf{Environment Variables} & \textbf{Description}\\
\hline
Input Username & The input value in Username Box\\
\hline
Input Password & The input value in Password Box\\
\hline

\end{tabular}
\end{center}

\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}

\noindent User\_input.get():
\begin{itemize} 
\item transition: N/A
\item output: The input value of username entered by user.
\item exception: N/A 
\end{itemize}
\noindent Pass\_input.get()
\begin{itemize} 
\item transition: N/A
\item output: The input value of password entered by user.
\item exception: N/A 
\end{itemize}
\noindent Tk()
\begin{itemize} 
\item transition: Creating a new window.
\item output: The output window.
\item exception: N/A 
\end{itemize}
\noindent tk.label()
\begin{itemize} 
\item transition: Adding text on the window.
\item output: The text that presented on the window.
\item exception: N/A 
\end{itemize}
\noindent text.place()
\begin{itemize} 
\item transition: Placing the text at desired location on the window.
\item output: N/A
\item exception: N/A 
\end{itemize}

\subsubsection{Local Functions}

N/A


\newpage



\section{MIS of Information Storage Module} 



\subsection{Uses}
\begin{itemize}
\item Image Processing Module
\item Information Extraction Module
\end{itemize}
\subsection{Syntax}

\subsubsection{Constants}
maxNumOfStorage: The constant is set to ensure the storage to be small and keep the data precise and clear.\\
\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{8cm} }
\hline
\textbf{Name} & \textbf{Description}  \\
\hline
checkRecord & check object in frame is on record or needs a new entry\\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
\item objectMotion: Signal received from Image Processing Module \\
\item photoTakenDate: Variables used to record when the picture is captured\\
\item recordT: Record the picture and move it to the storage\\
\item recordF: Do nothing\\
\end{itemize}
\subsubsection{Environment Variables}
N/A
\subsubsection{Assumptions}
\begin{itemize}
\item The module may not always capture the expected information. Since the product is designed to assist people to make their room organized instead of replacing them to memorize everything they lost.\\
\item photoTakenDate: The system shall have good network signal during operation \\
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent objectMotion:
\begin{itemize}
\item transition: if true 
\item output: start checkRecord
\item exception: 
\end{itemize}

\noindent checkRecord:
\begin{itemize}
\item transition: on record
\item output: update object position
\item exception: N/A
\item transition: not on record
\item output: add a new entry and record position
\item exception: N/A
\end{itemize}


\subsubsection{Local Functions}
\begin{itemize}
\item photoT(): This function will take the photo once the command is operated.
\item photoNot(): This function will not take the photo even if the command is operated.
\end{itemize}
\newpage
\section{MIS of Information Extraction Module} 



\subsection{Uses}
information Extraction Module

\subsection{Syntax}

\subsubsection{Constants}
\begin{itemize}
\item byColor: Click the button and search by color.
\item bySize: Click the button and search by size.
\item byShape: Click the button and search by shape.
\item maxLoop: To ensure the infinite loop occur, the system will stop once it reach the max limitation.
\end{itemize}

\subsubsection{Access Programs}


\begin{center}
\begin{tabular}{p{4cm} p{8cm} }
\hline
\textbf{Name} & \textbf{Description}  \\
\hline
enterTime & User enters the last time the object used \\
\hline
displayConformation & window for displaying result\\
\hline

\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
\item timeEntered: boolean variable for whether user has enter a time or not.
\item attr\_color: The color of the desired item.
\item attr\_size: The size of the desired item.
\item attr\_shape: The shape of the desired item.
\end{itemize}


\subsubsection{Environment Variables}

searchButton: button for entering the time. User can use this button with empty message.

\subsubsection{Assumptions}

\begin{itemize}
\item The module may not always find out the exactly matched object. Since the attributes are not large enough and the training for machine learning is not mature enough to do complicated computation.
\end{itemize}
\subsubsection{Access Routine Semantics}

\noindent timeEntered():
\begin{itemize}
\item transition: if empty  
\item output: default value of 1, search result becomes sorting of most recent records.
\item exception: N/A
\item transition: if not empty  
\item output: send the time value to find corresponding record
\item exception: N/A
\end{itemize}
\noindent searchButton():
\begin{itemize}
\item transition: if clicked  
\item output: displaceConformation
\item exception: N/A
\end{itemize}



\subsubsection{Local Functions}

\begin{itemize}
\item research\_color(): The function of which could search the desired item about the specific color.
\item research\_size(): The function of which could search the desired item about the specific size.
\item research\_shape(): The function of which could search the desired item about the specific shape.
\end{itemize}
\newpage
\section{MIS of Image Processing Module} 

 

\subsection{Uses}

Communication Port 1

\subsection{Syntax}

\subsubsection{Constants}

\begin{center}
\begin{tabular}{|p{8cm}|p{6cm}|}
\hline
\textbf{Name of Constants} & \textbf{Value}\\
\hline
min\_detection\_confidence & 0.5\\
\hline
Search Window Geometry & 1500*800\\
\hline
\end{tabular}
\end{center}

\subsubsection{Access Programs}

\begin{center}
\begin{tabular}{|l|l|l| p{7cm} |}
\hline
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Description}  \\
\hline
\_\_init\_\_ & self, window, cap, label & N/A & set the initial condition of the module\\
\hline
hand\_detect & self& N/A & detect the hand of the human ody from the image.\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{center}
\begin{tabular}{|p{4cm}|p{4cm}|l|}
\hline
\textbf{Name} & textbf{value} & \textbf{Description}\\
\hline
window & N/A & The Search Window\\
\hline
window.title & Main Window & The title of teh Search Window in the program.\\
\hline
hand\_detect & N/A & The hand detection method.\\
\hline
\end{tabular}
\end{center}


\subsubsection{Environment Variables}

N/A


\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}

\noindent humanDetected():
\begin{itemize}
\item transition: If True 
\item output: start object motion detection and send signal to Communication Transmit Module
\item exception: N/A
\end{itemize}
\noindent objectMotion():
\begin{itemize}
\item transition: If True 
\item output: send signal to Information Storage Module 
\item exception: N/A
\end{itemize}
\noindent img.resize():
\begin{itemize}
\item transition: Resizing the image taken by the camera. 
\item output: The image after resizing.
\item exception: N/A
\end{itemize}
\noindent cv2.flip():
\begin{itemize}
\item transition: Flip the whole image taken by the camera.
\item output: The output image after fliping.
\item exception: N/A
\end{itemize}
\noindent cv2.cvtColor():
\begin{itemize}
\item transition: The color of the image is converted from BGR to RGB.
\item output: The output image after color conversion.
\item exception: N/A
\end{itemize}
\noindent mp\_drawing.draw\_landmarks():
\begin{itemize}
\item transition: The shape of hand is shown on image.
\item output: The output image after the shape of hand has been detected in the image.
\item exception: N/A
\end{itemize}



\subsubsection{Local Functions}

\wss{As appropriate} \wss{These functions are for the purpose of specification.
  They are not necessarily something that is going to be implemented
  explicitly.  Even if they are implemented, they are not exported; they only
  have local scope.}

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{MIS of Communication Port 1 Module} 



\subsection{Uses}
Communication Port 2

\subsection{Syntax}

\subsubsection{Constants}
N/A

\subsubsection{Access Programs}

N/A

\subsection{Semantics}

\subsubsection{State Variables}

connectionCheck: Boolean variable for connection between software component and hardware component

\subsubsection{Environment Variables}



\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}

\noindent connectCheck:
\begin{itemize}
\item transition: if True  
\item output: send signal and data to Communication Port 2 Module 
\item exception: N/A 
\end{itemize}



\subsubsection{Local Functions}

N/A

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{MIS of Communication Port 2 Module} 



\subsection{Uses}
Communication Port 2 Module

\subsection{Syntax}

\subsubsection{Constants}
N/A

\subsubsection{Access Programs}

N/A

\subsection{Semantics}

\subsubsection{State Variables}

connectionCheck: Boolean variable for connection between software component and hardware component

\subsubsection{Environment Variables}



\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}


\noindent connectCheck:
\begin{itemize}
\item transition: if True  
\item output: send signal and data to Communication Port 1 Module 
\item exception: N/A 
\end{itemize}


\subsubsection{Local Functions}

N/A

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{MIS of Motor Control Module} 



\subsection{Uses}
Communication Port 2

\subsection{Syntax}

\subsubsection{Constants}
\begin{tabular}{|p{0.2\textwidth}|p{0.15\textwidth}|p{0.1\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}

\hline \multicolumn{5}{|c|}{Table 3: Constants Variables}\\

\hline Constant Name&Constant Type&Value&Units &Comment\\

\hline Angle per step&float&TBD&Degree/step&This is the angle movement stepper motor will move after 1 signal \\

\hline Height of the Camera&float&TBD&mm&This is the distance between the lens of camera and the bottom of the mount\\

\hline Resolution&Integer&1920x1080&Pixel&This is the resolution of the camera\\
\hline Arduino input voltage&float&9.0&V&This is the input voltage of the Arduino board\\


\hline

\end{tabular}


\subsubsection{Access Programs}


\begin{center}
\begin{tabular}{p{4cm} p{8cm} }
\hline
\textbf{Name} & \textbf{Description}  \\
\hline
positionMotor & rotate motor to reposition camera according to the data send from the software module. \\
\hline

\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

dataRecieved: Boolean variable representing whether data has received. \\
posistionReached: Boolean variable representing whether camera has reached desired position
\subsubsection{Environment Variables}



\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}

\noindent dataRecieved():
\begin{itemize}
\item transition: if True 
\item output: positionMotor 
\item exception: N/A 
\end{itemize}

\noindent positionReached():
\begin{itemize}
\item transition: if True 
\item output: signal Communication Port 2 to send video frames to Communication Port 1 
\item exception: N/A 
\end{itemize}




\subsubsection{Local Functions}

N/A

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage





\section{Appendix} \label{Appendix}

\wss{Extra information if required}


\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\end{document}
